<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Change the availability matrix to simplify automated ATLANTIS calibrations. — change_avail • atlantistools</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Change the availability matrix to simplify automated ATLANTIS calibrations. — change_avail" />
<meta property="og:description" content="Change the availability of predator XXX on specific preygroups." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">atlantistools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/atlantistools.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/model-calibration-species.html">model-calibration-species</a>
    </li>
    <li>
      <a href="../articles/model-calibration.html">model-calibration</a>
    </li>
    <li>
      <a href="../articles/model-comparison.html">model-comparison</a>
    </li>
    <li>
      <a href="../articles/model-preprocess.html">model-preprocess</a>
    </li>
    <li>
      <a href="../articles/package-demo.html">package-demo</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/Atlantis-Ecosystem-Model/atlantistools/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Change the availability matrix to simplify automated ATLANTIS calibrations.</h1>
    <small class="dont-index">Source: <a href='https://github.com/Atlantis-Ecosystem-Model/atlantistools/blob/master/R/change-avail.R'><code>R/change-avail.R</code></a></small>
    <div class="hidden name"><code>change_avail.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Change the availability of predator XXX on specific preygroups.</p>
    </div>

    <pre class="usage"><span class='fu'>change_avail</span><span class='op'>(</span>
  <span class='va'>dietmatrix</span>,
  pred <span class='op'>=</span> <span class='cn'>NULL</span>,
  pred_stanza <span class='op'>=</span> <span class='cn'>NULL</span>,
  prey <span class='op'>=</span> <span class='cn'>NULL</span>,
  <span class='va'>roc</span>,
  relative <span class='op'>=</span> <span class='cn'>TRUE</span>,
  consecutive <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>dietmatrix</th>
      <td><p>Dataframe in 'long' format containing information about availabilities
with columns 'pred', 'prey', 'pred_stanza', 'prey_stanza', 'code', 'prey_id' and
'avail'. The dataframe should be generated with <code><a href='load_dietmatrix.html'>load_dietmatrix()</a></code>.</p></td>
    </tr>
    <tr>
      <th>pred</th>
      <td><p>Character vector of predator Acronyms (see <code><a href='get_groups.html'>get_acronyms()</a></code>).
Selecting <code>NULL</code> as pred results in all predators being selected. This
can be helpful if you want to increase the feeding pressure on a specific
prey item by all groups. Default is <code>NULL</code>.</p></td>
    </tr>
    <tr>
      <th>pred_stanza</th>
      <td><p>Integer vector indicating if the predator is juvenile (= 1) or
adult (= 2). <code>pred</code> and <code>pred_stanza</code> need to be of the same length.
In rare instances, e.g. pred_stanza being <code>NULL</code> or one single integer
either all pred_stanzas are selected or the single pred_stanza is applied to all
predators. Default is <code>NULL</code>.</p></td>
    </tr>
    <tr>
      <th>prey</th>
      <td><p>List of character vectors of prey Acronyms (see <code><a href='get_groups.html'>get_acronyms()</a></code>).
<code>pred</code> and <code>prey</code> need to be of the same length. Selecting <code>NULL</code> as
prey results in all prey groups being selected. This
can be helpful if you want to increase the available prey for a specific predator
overall. Default is <code>NULL</code>.</p></td>
    </tr>
    <tr>
      <th>roc</th>
      <td><p>Vector of multiplication factors which shall be applied to the old set of parameters.
Please supply one value per selected group. In case relative is FALSE the new absolute values
can be passed as roc.</p></td>
    </tr>
    <tr>
      <th>relative</th>
      <td><p>Logical if TRUE values are changed relative to base values. If FALSE new values can
be passed directly. Default is <code>NULL</code>.</p></td>
    </tr>
    <tr>
      <th>consecutive</th>
      <td><p>Boolean indicating if multiple calls to change_avail are performed one after
another <code>TRUE</code>. Default is <code>FALSE</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>parameterfile *.prm file with the new parameter values.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>d</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"extdata"</span>, <span class='st'>"setas-model-new-trunk"</span>, package <span class='op'>=</span> <span class='st'>"atlantistools"</span><span class='op'>)</span>
<span class='va'>dm</span> <span class='op'>&lt;-</span> <span class='fu'><a href='load_dietmatrix.html'>load_dietmatrix</a></span><span class='op'>(</span>prm_biol <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='st'>"VMPA_setas_biol_fishing_Trunk.prm"</span><span class='op'>)</span>,
                      fgs <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='st'>"SETasGroupsDem_NoCep.csv"</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>dm1</span> <span class='op'>&lt;-</span> <span class='fu'>change_avail</span><span class='op'>(</span>dietmatrix <span class='op'>=</span> <span class='va'>dm</span>,
                    pred <span class='op'>=</span> <span class='st'>"FPS"</span>,
                    pred_stanza <span class='op'>=</span> <span class='fl'>1</span>,
                    prey <span class='op'>=</span> <span class='st'>"CEP"</span>,
                    roc <span class='op'>=</span> <span class='fl'>0.1234</span>,
                    relative <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='co'># Show only rows with availability of 0.1234</span>
<span class='va'>dm1</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/apply.html'>apply</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/apply.html'>apply</a></span><span class='op'>(</span><span class='va'>dm1</span><span class='op'>[</span>, <span class='fl'>5</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>ncol</a></span><span class='op'>(</span><span class='va'>dm1</span><span class='op'>)</span><span class='op'>]</span>, MARGIN <span class='op'>=</span> <span class='fl'>2</span>, <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='va'>x</span> <span class='op'>==</span> <span class='fl'>0.1234</span><span class='op'>)</span>, MARGIN <span class='op'>=</span> <span class='fl'>1</span>, <span class='va'>any</span><span class='op'>)</span>, <span class='op'>]</span>
</div><div class='output co'>#&gt;   pred pred_stanza prey_stanza       code FPS FVS    CEP  BML PL DL DR DC DLsed
#&gt; 6  FPS           1           1 pPREY1FPS1   0   0 0.1234 0.01  0  0  0  0     0
#&gt; 7  FPS           1           2 pPREY2FPS1   0   0 0.1234 0.01  0  0  0  0     0
#&gt;   DRsed DCsed
#&gt; 6     0     0
#&gt; 7     0     0</div><div class='input'>
<span class='va'>dm2</span> <span class='op'>&lt;-</span> <span class='fu'>change_avail</span><span class='op'>(</span>dietmatrix <span class='op'>=</span> <span class='va'>dm</span>,
                    pred <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"FPS"</span>, <span class='st'>"FVS"</span><span class='op'>)</span>,
                    pred_stanza <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>2</span><span class='op'>)</span>,
                    prey <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"FPS"</span>, <span class='st'>"FVS"</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"FPS"</span>, <span class='st'>"FVS"</span><span class='op'>)</span><span class='op'>)</span>,
                    roc <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.1111</span>, <span class='fl'>0.2222</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.3333</span>, <span class='fl'>0.4444</span><span class='op'>)</span><span class='op'>)</span>,
                    relative <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='co'># Show only rows with availability of 0.1111, 0.2222, 0.3333 or 0.4444</span>
<span class='va'>dm2</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/apply.html'>apply</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/apply.html'>apply</a></span><span class='op'>(</span><span class='va'>dm2</span><span class='op'>[</span>, <span class='fl'>5</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>ncol</a></span><span class='op'>(</span><span class='va'>dm2</span><span class='op'>)</span><span class='op'>]</span>, MARGIN <span class='op'>=</span> <span class='fl'>2</span>,
<span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/sets.html'>is.element</a></span><span class='op'>(</span><span class='va'>x</span>,  <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.1111</span>, <span class='fl'>0.2222</span>, <span class='fl'>0.3333</span>, <span class='fl'>0.4444</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>, MARGIN <span class='op'>=</span> <span class='fl'>1</span>, <span class='va'>any</span><span class='op'>)</span>, <span class='op'>]</span>
</div><div class='output co'>#&gt;    pred pred_stanza prey_stanza       code    FPS    FVS   CEP  BML    PL    DL
#&gt; 6   FPS           1           1 pPREY1FPS1 0.1111 0.2222 0e+00 0.01 0.000 0.000
#&gt; 7   FPS           1           2 pPREY2FPS1 0.1111 0.2222 0e+00 0.01 0.000 0.000
#&gt; 12  FVS           2           1 pPREY1FVS2 0.3333 0.4444 1e-03 0.00 0.020 0.001
#&gt; 13  FVS           2           2 pPREY2FVS2 0.3333 0.4444 5e-04 0.00 0.004 0.000
#&gt;       DR DC DLsed DRsed DCsed
#&gt; 6  0e+00  0 0.000  0.00     0
#&gt; 7  0e+00  0 0.000  0.00     0
#&gt; 12 0e+00  0 0.004  0.01     0
#&gt; 13 1e-04  0 0.008  0.01     0</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Alexander Keth, Andy Beet.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


